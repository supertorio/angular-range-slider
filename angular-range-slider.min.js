/*! angular-rangeslider-directive 2018-02-20 */
!function(a,b){if("function"!=typeof define||!define.amd)return b(a);define("angular-range-slider",["angular"],function(a){return b(a)})}("undefined"==typeof angular?null:angular,function(a){var b=a.module("angularRangeSlider",[]);return b.directive("rangeSlider",["$timeout",function(b){function c(a,b,c,d){var e=(a-d)%c,f=e>c/2?a+c-e:a-e,g=Math.pow(10,b),h=f*g/g;return parseFloat(h.toFixed(b))}function d(a,b){return a.css({left:b})}function e(a){return a+"px"}function f(a){return isNaN(a)?a:Math.min(Math.max(0,a),100)}var g={single:"SINGLE",range:"RANGE"},h={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend"}};return{restrict:"EA",scope:{floor:"=?",ceiling:"=?",step:"@",highlight:"@",precision:"@",buffer:"@",dragstop:"@",ngModel:"=?",ngModelLow:"=?",ngModelHigh:"=?",disabled:"=?"},link:function(b,i,j){i.addClass("angular-range-slider");var k,l,m=null==j.ngModel&&null!=j.ngModelLow&&null!=j.ngModelHigh?g.range:g.single,n=i.children(),o=a.element(n[0]),p=a.element(n[1]),q=a.element(n[2]),r=(a.element(n[3]),a.element(n[4])),s=a.element(n[5]),t=a.element(n[6]),u=a.element(o.children()[0]),v=a.element(document);m===g.single?(k="ngModel",q.remove(),t.remove()):(k="ngModelLow",l="ngModelHigh"),b.local={},b.local[k]=b[k],b.local[l]=b[l];var w=0,x=0,y=0,z=0,A=0,B=0,C=0,D=0,E=!1,F=function(){void 0===b.step&&(b.step=1),void 0===b.floor&&(b.floor=0),void 0===b.ceiling&&(b.ceiling=100),void 0===b.precision&&(b.precision=0),m===g.single&&(b.ngModelLow=b.ngModel),b.local[k]=b[k],b.local[l]=b[l],b.floor=c(parseFloat(b.floor),parseInt(b.precision),parseFloat(b.step),parseFloat(b.floor)),b.ceiling=c(parseFloat(b.ceiling),parseInt(b.precision),parseFloat(b.step),parseFloat(b.floor)),m===g.range?(b.ngModelLow=c(parseFloat(b.ngModelLow),parseInt(b.precision),parseFloat(b.step),parseFloat(b.floor)),b.ngModelHigh=c(parseFloat(b.ngModelHigh),parseInt(b.precision),parseFloat(b.step),parseFloat(b.floor))):b.ngModel=c(parseFloat(b.ngModel),parseInt(b.precision),parseFloat(b.step),parseFloat(b.floor)),w=p[0].offsetWidth/2,x=o[0].offsetWidth,y=0,z=x-p[0].offsetWidth,A=parseFloat(b.floor),B=parseFloat(b.ceiling),C=B-A,D=z-y},G=function(){F(),b.disabled?(t.addClass("disable"),s.addClass("disable"),p.addClass("disable"),q.addClass("disable"),o.addClass("disable"),u.addClass("disable")):(t.removeClass("disable"),s.removeClass("disable"),p.removeClass("disable"),q.removeClass("disable"),o.removeClass("disable"),u.removeClass("disable"));var a=function(a){return f((a-y)/D*100)},j=function(a){return f((a-A)/C*100)},n=function(a){return e(a*D/100)},B=function(){d(r,e(x-r[0].offsetWidth));var a,c;a=j(b.local[k]),d(p,n(a)),d(s,e(p[0].offsetLeft-s[0].offsetWidth/2+w)),d(u,e(p[0].offsetLeft+w)),m===g.range?(c=j(b.local[l]),d(q,n(c)),d(t,e(q[0].offsetLeft-t[0].offsetWidth/2+w)),u.css({width:n(c-a)})):"right"===b.highlight?u.css({width:n(110-a)}):"left"===b.highlight&&(u.css({width:n(a)}),d(u,0))},G=function(d,e,f,h){b.disabled&&(e.addClass("disable"),d.addClass("disable"),o.addClass("disable"),u.addClass("disable"));var j=f,n=function(){e.removeClass("active"),d.removeClass("active"),v.unbind(h.move),v.unbind(h.end),b.dragstop&&(b[l]=b.local[l],b[k]=b.local[k]),j=f,b.$apply()},r=function(d){if(!b.disabled){var e=0;void 0!==d.clientX?e=d.clientX:void 0!==d.touches&&d.touches.length?e=d.touches[0].clientX:void 0!==d.originalEvent&&void 0!==d.originalEvent.changedTouches&&d.originalEvent.changedTouches.length&&(e=d.originalEvent.changedTouches[0].clientX);var f=Math.max(Math.min(e-i[0].getBoundingClientRect().left-w,z),y),h=a(f),n=A+C*h/100;if(m===g.range)switch(j){case k:n>b.local[l]?(j=l,p.removeClass("active"),s.removeClass("active"),q.addClass("active"),t.addClass("active"),B()):b.buffer>0&&(n=Math.min(n,b.local[l]-b.buffer));break;case l:n<b.local[k]?(j=k,q.removeClass("active"),t.removeClass("active"),p.addClass("active"),s.addClass("active"),B()):b.buffer>0&&(n=Math.max(n,parseInt(b.local[k])+parseInt(b.buffer)))}n=c(n,parseInt(b.precision),parseFloat(b.step),parseFloat(b.floor)),b.local[j]=n,b.dragstop||(b[j]=n),B(),b.$apply()}},x=function(a){return F(),e.addClass("active"),d.addClass("active"),B(),a.stopPropagation(),a.preventDefault(),v.bind(h.move,r),v.bind(h.end,n)};d.bind(h.start,x)},H=function(){var a,b,c=["touch","mouse"];for(b=0;b<c.length;b++)a=c[b],m===g.range?(G(p,s,k,h[a]),G(q,t,l,h[a])):G(p,s,k,h[a]);E=!0};E||H(),B()};b.$watch(k,G),b.$watch("disabled",G),m===g.range&&b.$watch(l,G),window.addEventListener("resize",G)},template:'<div class="bar"><div class="selection"></div></div><div class="handle low"></div><div class="handle high"></div><div class="bubble limit low">{{ floor }}</div><div class="bubble limit high">{{ ceiling }}</div><div class="bubble value low">{{ ngModelLow }}</div><div class="bubble value high">{{ ngModelHigh }}</div>'}}]),b});